"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/profile/verify-email";
exports.ids = ["pages/api/profile/verify-email"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "@prisma/client/runtime/library":
/*!*************************************************!*\
  !*** external "@prisma/client/runtime/library" ***!
  \*************************************************/
/***/ ((module) => {

module.exports = require("@prisma/client/runtime/library");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofile%2Fverify-email&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fprofile%2Fverify-email.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofile%2Fverify-email&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fprofile%2Fverify-email.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_profile_verify_email_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/profile/verify-email.ts */ \"(api)/./src/pages/api/profile/verify-email.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_profile_verify_email_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_profile_verify_email_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/profile/verify-email\",\n        pathname: \"/api/profile/verify-email\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_profile_verify_email_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb2ZpbGUlMkZ2ZXJpZnktZW1haWwmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmFwaSUyRnByb2ZpbGUlMkZ2ZXJpZnktZW1haWwudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDb0U7QUFDcEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG1FQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxtRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8/ZmM5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9wcm9maWxlL3ZlcmlmeS1lbWFpbC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb2ZpbGUvdmVyaWZ5LWVtYWlsXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZmlsZS92ZXJpZnktZW1haWxcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofile%2Fverify-email&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fprofile%2Fverify-email.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/profile/verify-email.ts":
/*!***********************************************!*\
  !*** ./src/pages/api/profile/verify-email.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client/runtime/library */ \"@prisma/client/runtime/library\");\n/* harmony import */ var _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n// Define custom error types\nclass ValidationError extends Error {\n    constructor(message){\n        super(message);\n        this.name = \"ValidationError\";\n    }\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        const { walletAddress, email, username } = req.body;\n        if (!walletAddress || !email || !username) {\n            throw new ValidationError(\"Missing required fields: walletAddress, email, and username are required\");\n        }\n        // First, check for existing user with this email\n        const existingUserWithEmail = await prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        if (existingUserWithEmail && existingUserWithEmail.walletAddress !== walletAddress) {\n            throw new ValidationError(\"This email is already associated with another wallet address\");\n        }\n        // Check for existing user with this wallet address\n        const existingUserWithWallet = await prisma.user.findUnique({\n            where: {\n                walletAddress\n            }\n        });\n        let user;\n        if (existingUserWithWallet) {\n            // If the user exists with this wallet, update their details\n            user = await prisma.user.update({\n                where: {\n                    walletAddress\n                },\n                data: {\n                    email: existingUserWithEmail?.walletAddress === walletAddress ? email : undefined,\n                    emailVerified: true,\n                    username: `${username}_${Date.now()}`,\n                    updatedAt: new Date()\n                }\n            });\n        } else {\n            // Create new user if the wallet doesn't exist\n            try {\n                user = await prisma.user.create({\n                    data: {\n                        walletAddress,\n                        email,\n                        emailVerified: true,\n                        username: `${username}_${Date.now()}`,\n                        createdAt: new Date(),\n                        updatedAt: new Date()\n                    }\n                });\n            } catch (unknownError) {\n                const error = unknownError;\n                if (error.code === \"P2002\") {\n                    throw new ValidationError(\"This email or username is already taken\");\n                }\n                throw error;\n            }\n        }\n        return res.status(200).json(user);\n    } catch (unknownError) {\n        console.error(\"Verification error:\", unknownError);\n        if (unknownError instanceof ValidationError) {\n            return res.status(400).json({\n                message: unknownError.message\n            });\n        }\n        if (unknownError instanceof _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_1__.PrismaClientKnownRequestError) {\n            return res.status(400).json({\n                message: \"Database error occurred\",\n                code: unknownError.code\n            });\n        }\n        const error = unknownError instanceof Error ? unknownError : new Error(\"An unexpected error occurred\");\n        return res.status(500).json({\n            message: error.message\n        });\n    } finally{\n        await prisma.$disconnect();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3Byb2ZpbGUvdmVyaWZ5LWVtYWlsLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQzhDO0FBQ2lDO0FBRS9FLE1BQU1FLFNBQVMsSUFBSUYsd0RBQVlBO0FBUy9CLDRCQUE0QjtBQUM1QixNQUFNRyx3QkFBd0JDO0lBQzVCQyxZQUFZQyxPQUFlLENBQUU7UUFDM0IsS0FBSyxDQUFDQTtRQUNOLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVlLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRVAsU0FBUztRQUFxQjtJQUM5RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVRLGFBQWEsRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUUsR0FBR1AsSUFBSVEsSUFBSTtRQUVuRCxJQUFJLENBQUNILGlCQUFpQixDQUFDQyxTQUFTLENBQUNDLFVBQVU7WUFDekMsTUFBTSxJQUFJYixnQkFBZ0I7UUFDNUI7UUFFQSxpREFBaUQ7UUFDakQsTUFBTWUsd0JBQXdCLE1BQU1oQixPQUFPaUIsSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFDekRDLE9BQU87Z0JBQUVOO1lBQU07UUFDakI7UUFFQSxJQUFJRyx5QkFBeUJBLHNCQUFzQkosYUFBYSxLQUFLQSxlQUFlO1lBQ2xGLE1BQU0sSUFBSVgsZ0JBQWdCO1FBQzVCO1FBRUEsbURBQW1EO1FBQ25ELE1BQU1tQix5QkFBeUIsTUFBTXBCLE9BQU9pQixJQUFJLENBQUNDLFVBQVUsQ0FBQztZQUMxREMsT0FBTztnQkFBRVA7WUFBYztRQUN6QjtRQUVBLElBQUlLO1FBQ0osSUFBSUcsd0JBQXdCO1lBQzFCLDREQUE0RDtZQUM1REgsT0FBTyxNQUFNakIsT0FBT2lCLElBQUksQ0FBQ0ksTUFBTSxDQUFDO2dCQUM5QkYsT0FBTztvQkFBRVA7Z0JBQWM7Z0JBQ3ZCVSxNQUFNO29CQUNKVCxPQUFPRyx1QkFBdUJKLGtCQUFrQkEsZ0JBQWdCQyxRQUFRVTtvQkFDeEVDLGVBQWU7b0JBQ2ZWLFVBQVUsQ0FBQyxFQUFFQSxTQUFTLENBQUMsRUFBRVcsS0FBS0MsR0FBRyxHQUFHLENBQUM7b0JBQ3JDQyxXQUFXLElBQUlGO2dCQUNqQjtZQUNGO1FBQ0YsT0FBTztZQUNMLDhDQUE4QztZQUM5QyxJQUFJO2dCQUNGUixPQUFPLE1BQU1qQixPQUFPaUIsSUFBSSxDQUFDVyxNQUFNLENBQUM7b0JBQzlCTixNQUFNO3dCQUNKVjt3QkFDQUM7d0JBQ0FXLGVBQWU7d0JBQ2ZWLFVBQVUsQ0FBQyxFQUFFQSxTQUFTLENBQUMsRUFBRVcsS0FBS0MsR0FBRyxHQUFHLENBQUM7d0JBQ3JDRyxXQUFXLElBQUlKO3dCQUNmRSxXQUFXLElBQUlGO29CQUNqQjtnQkFDRjtZQUNGLEVBQUUsT0FBT0ssY0FBdUI7Z0JBQzlCLE1BQU1DLFFBQVFEO2dCQUNkLElBQUlDLE1BQU1DLElBQUksS0FBSyxTQUFTO29CQUMxQixNQUFNLElBQUkvQixnQkFBZ0I7Z0JBQzVCO2dCQUNBLE1BQU04QjtZQUNSO1FBQ0Y7UUFFQSxPQUFPdkIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ007SUFDOUIsRUFBRSxPQUFPYSxjQUF1QjtRQUM5QkcsUUFBUUYsS0FBSyxDQUFDLHVCQUF1QkQ7UUFFckMsSUFBSUEsd0JBQXdCN0IsaUJBQWlCO1lBQzNDLE9BQU9PLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVQLFNBQVMwQixhQUFhMUIsT0FBTztZQUFDO1FBQzlEO1FBRUEsSUFBSTBCLHdCQUF3Qi9CLHlGQUE2QkEsRUFBRTtZQUN6RCxPQUFPUyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQlAsU0FBUztnQkFDVDRCLE1BQU1GLGFBQWFFLElBQUk7WUFDekI7UUFDRjtRQUVBLE1BQU1ELFFBQVFELHdCQUF3QjVCLFFBQVE0QixlQUFlLElBQUk1QixNQUFNO1FBRXZFLE9BQU9NLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRVAsU0FBUzJCLE1BQU0zQixPQUFPO1FBQUM7SUFDdkQsU0FBVTtRQUNSLE1BQU1KLE9BQU9rQyxXQUFXO0lBQzFCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9wYWdlcy9hcGkvcHJvZmlsZS92ZXJpZnktZW1haWwudHM/MTMxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvciB9IGZyb20gJ0BwcmlzbWEvY2xpZW50L3J1bnRpbWUvbGlicmFyeSc7XG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuLy8gRGVmaW5lIGEgdHlwZSBmb3IgdGhlIGV4cGVjdGVkIHJlcXVlc3QgYm9keVxuaW50ZXJmYWNlIFZlcmlmaWNhdGlvblJlcXVlc3Qge1xuICB3YWxsZXRBZGRyZXNzOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG59XG5cbi8vIERlZmluZSBjdXN0b20gZXJyb3IgdHlwZXNcbmNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ1ZhbGlkYXRpb25FcnJvcic7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgd2FsbGV0QWRkcmVzcywgZW1haWwsIHVzZXJuYW1lIH0gPSByZXEuYm9keSBhcyBWZXJpZmljYXRpb25SZXF1ZXN0O1xuXG4gICAgaWYgKCF3YWxsZXRBZGRyZXNzIHx8ICFlbWFpbCB8fCAhdXNlcm5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiB3YWxsZXRBZGRyZXNzLCBlbWFpbCwgYW5kIHVzZXJuYW1lIGFyZSByZXF1aXJlZCcpO1xuICAgIH1cblxuICAgIC8vIEZpcnN0LCBjaGVjayBmb3IgZXhpc3RpbmcgdXNlciB3aXRoIHRoaXMgZW1haWxcbiAgICBjb25zdCBleGlzdGluZ1VzZXJXaXRoRW1haWwgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGVtYWlsIH1cbiAgICB9KTtcblxuICAgIGlmIChleGlzdGluZ1VzZXJXaXRoRW1haWwgJiYgZXhpc3RpbmdVc2VyV2l0aEVtYWlsLndhbGxldEFkZHJlc3MgIT09IHdhbGxldEFkZHJlc3MpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1RoaXMgZW1haWwgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYW5vdGhlciB3YWxsZXQgYWRkcmVzcycpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyB1c2VyIHdpdGggdGhpcyB3YWxsZXQgYWRkcmVzc1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlcldpdGhXYWxsZXQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHdhbGxldEFkZHJlc3MgfVxuICAgIH0pO1xuXG4gICAgbGV0IHVzZXI7XG4gICAgaWYgKGV4aXN0aW5nVXNlcldpdGhXYWxsZXQpIHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIGV4aXN0cyB3aXRoIHRoaXMgd2FsbGV0LCB1cGRhdGUgdGhlaXIgZGV0YWlsc1xuICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IHdhbGxldEFkZHJlc3MgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGVtYWlsOiBleGlzdGluZ1VzZXJXaXRoRW1haWw/LndhbGxldEFkZHJlc3MgPT09IHdhbGxldEFkZHJlc3MgPyBlbWFpbCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgIHVzZXJuYW1lOiBgJHt1c2VybmFtZX1fJHtEYXRlLm5vdygpfWAsIC8vIEVuc3VyZSB1bmlxdWUgdXNlcm5hbWVcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyZWF0ZSBuZXcgdXNlciBpZiB0aGUgd2FsbGV0IGRvZXNuJ3QgZXhpc3RcbiAgICAgIHRyeSB7XG4gICAgICAgIHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHdhbGxldEFkZHJlc3MsXG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgICB1c2VybmFtZTogYCR7dXNlcm5hbWV9XyR7RGF0ZS5ub3coKX1gLCAvLyBFbnN1cmUgdW5pcXVlIHVzZXJuYW1lXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAodW5rbm93bkVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdW5rbm93bkVycm9yIGFzIFByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yO1xuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1AyMDAyJykge1xuICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1RoaXMgZW1haWwgb3IgdXNlcm5hbWUgaXMgYWxyZWFkeSB0YWtlbicpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih1c2VyKTtcbiAgfSBjYXRjaCAodW5rbm93bkVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcignVmVyaWZpY2F0aW9uIGVycm9yOicsIHVua25vd25FcnJvcik7XG4gICAgXG4gICAgaWYgKHVua25vd25FcnJvciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogdW5rbm93bkVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmICh1bmtub3duRXJyb3IgaW5zdGFuY2VvZiBQcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgIG1lc3NhZ2U6ICdEYXRhYmFzZSBlcnJvciBvY2N1cnJlZCcsXG4gICAgICAgIGNvZGU6IHVua25vd25FcnJvci5jb2RlXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZXJyb3IgPSB1bmtub3duRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHVua25vd25FcnJvciA6IG5ldyBFcnJvcignQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcpO1xuICAgIFxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgcHJpc21hLiRkaXNjb25uZWN0KCk7XG4gIH1cbn0iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiUHJpc21hQ2xpZW50S25vd25SZXF1ZXN0RXJyb3IiLCJwcmlzbWEiLCJWYWxpZGF0aW9uRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIm5hbWUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsIndhbGxldEFkZHJlc3MiLCJlbWFpbCIsInVzZXJuYW1lIiwiYm9keSIsImV4aXN0aW5nVXNlcldpdGhFbWFpbCIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJleGlzdGluZ1VzZXJXaXRoV2FsbGV0IiwidXBkYXRlIiwiZGF0YSIsInVuZGVmaW5lZCIsImVtYWlsVmVyaWZpZWQiLCJEYXRlIiwibm93IiwidXBkYXRlZEF0IiwiY3JlYXRlIiwiY3JlYXRlZEF0IiwidW5rbm93bkVycm9yIiwiZXJyb3IiLCJjb2RlIiwiY29uc29sZSIsIiRkaXNjb25uZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/profile/verify-email.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprofile%2Fverify-email&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fprofile%2Fverify-email.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();